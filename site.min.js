"use strict";var _slicedToArray=function(){return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,a){var r=[],e=!0,n=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(e=(o=l.next()).done)&&(r.push(o.value),!a||r.length!==a);e=!0);}catch(t){n=!0,i=t}finally{try{!e&&l.return&&l.return()}finally{if(n)throw i}}return r}(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ctri={disabledTextColor:"#6c757d",order:"asc",defaultLinkText:"Full Text",dataCols:[{title:"display",data:"display",className:"dataTablesDisplayCol",render:function(t,a,r,e){return"filter"===a?$(t).text():t},visible:!0},{title:"Article Title",data:"title",visible:!1},{title:"Journal",data:"journal",visible:!1},{title:"Topic",data:"topic",visible:!1},{title:"Primary Author",data:"author",render:function(t,a,r,e){return"string"==typeof t[0]?t[0]:t[0][2]},visible:!1},{title:"Year",data:"date",render:function(t,a,r,e){return t.split("-")[0]},visible:!1}],init:function(){$("#mainDataTable").DataTable({columns:ctri.dataCols,data:ctri.generateData(),createdRow:function(t,a,r){return $(t).addClass("dataTablesRow")},sDom:"ftpi",drawCallback:function(){$(".expandButton").length||$(".dataTablesRow").append(ctri.generateExpandButton()),$(window).resize()},language:{zeroRecords:"No matching journal entries",search:""}}),$("input.form-control").prop("placeholder","Search journal entries"),$("#mainDataTable tbody").on("click",".expandButton",function(t){var a=$(t.currentTarget).parent(),r=$("#mainDataTable").DataTable().row(a);r.child.isShown()?(r.child.hide(),a.removeClass("shown")):(r.child(ctri.generateHTMLforChild(r.data()),"dataTableChild").show(),a.addClass("shown"))}),$(window).on("resize",function(){$(".dataTablesRow").each(function(){$(this).find(".expandButton").css("transform","translate(-40px,"+($(this).height()-33)+"px)")})}).resize(),$("#mainDataTable_filter").after(ctri.generateSortDropDown),$(".dataTablesCustom_sort").on("change",ctri.sort).change(),$(".dataTablesCustom_order").on("click",ctri.orderToggle)},sort:function(t){var a=$(".dataTablesCustom_sort").val();$(".dataTablesCustom_sort").css("color",a?"black":ctri.disabledTextColor);var r=ctri.dataCols.map(function(t){return t.data}).indexOf($(t.currentTarget).val());$("#mainDataTable").DataTable().order([r>-1?r:0,"asc"]).draw()},orderToggle:function(){ctri.order="asc"==ctri.order?"desc":"asc";var t=$("#mainDataTable").DataTable();t.order([t.order()[0][0],ctri.order]).draw(),$(".dataTablesCustom_order i").removeClass("fa-sort-amount-down fa-sort-amount-up"),$(".dataTablesCustom_order i").addClass("fa-sort-amount-"+("asc"==ctri.order?"down":"up"))},generateData:function(){var t=[];return ctri.data.forEach(function(a){var r=[];a.author.forEach(function(t){r.push("string"==typeof t?t:((t[2]||"").trim()+" "+(t[0][0]||"").trim()+(t[1][0]||"").trim()).trim())}),r=r.filter(function(t){return t});var e=a.link?'<a href="'+a.link+'">['+(a.link_text||ctri.defaultLinkText)+"]</a>":"";t.push($.extend({display:'\n                    <div class="container">\n                      <div class="row">\n                        <div class="col-9">\n                          <div class="container">\n                            <div class="row row-title">\n                              <div class="col-12">\n                                  '+a.title+'\n                              </div>\n                            </div>\n                            <div class="row">\n                              <div class="col-12">\n                                  '+a.journal+'\n                              </div>\n                            </div>\n                            <div class="row">\n                              <div class="col-12">\n                                  '+r.join(", ")+'\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                        <div class="col-3 text-end mt-1">\n                            '+e+"\n                        </div>\n                      </div>\n                    </div>\n                "},a))}),t},generateHTMLforChild:function(t){var a=[];t.author.forEach(function(t){a.push("string"==typeof t?t:((t[2]||"").trim()+" "+(t[0][0]||"").trim()+(t[1][0]||"").trim()).trim())}),a=a.filter(function(t){return t});var r="",e="";if(t.date){var n=t.date.split("/"),i=_slicedToArray(n,3),o=i[0],l=i[1],s=i[2];e=s,r=new Date(s+"-"+o+"-"+l).toLocaleString("default",{year:"numeric",month:"long",day:"numeric"}),r="1"==o&&"1"==l?"":r}e=e?"("+e+")":"";var d=t.journal?t.journal+". ":"",c=t.volume?"Vol. "+t.volume+", ":"",u=t.page?": "+t.page+".":".",b=t.issue?"No. "+t.issue:"",f=t.topic?t.topic+". ":"",v="";return v=(v=d?a.join(", ")+" "+e+" "+t.title+"."+d+c+b+u:a.join(", ")+"."+t.title+"."+f+"Online "+r+".").trim().replaceAll("  "," ").replaceAll(". .",".").replaceAll(", .","."),"\n\t\t<b>Authors:</b> "+a.join(", ")+"<br>\n\t\t<b>Paper Title:</b> "+t.title+"<br>\n\t\t<b>Topic:</b> "+t.topic+"<br>\n\t\t<b>Journal:</b> "+(t.journal||"N/A")+"<br>\n\t\t<b>Volume:</b> "+(t.volume||"N/A")+"<br>\n\t\t<b>Issue:</b> "+(t.issue||"N/A")+"<br>\n\t\t<b>Pages:</b> "+(t.page||"N/A")+"<br>\n\t\t<b>APA:</b><br>\n\t\t"+v+"\n\t\t"},generateExpandButton:function(){return'<div class="expandButton">+</div>'},generateSortDropDown:function(){var t="<option value=''>Sort by...</option>";return ctri.dataCols.forEach(function(a){a.visible||(t=t+'<option value="'+a.data+'">'+a.title+"</option>")}),'\n            <a class="dataTablesCustom_order">\n                <i class="fas fa-sort-amount-down fa-fw"></i>\n            </a>\n            <select class="dataTablesCustom_sort">'+t+"</select>"}};window.jQuery = window.$ = jQuery;$(document).ready(ctri.init);
